description "clockworkd Upstart process"

# change to match your deployment user
setuid <%= @user %>
setgid <%= @group %>

respawn
respawn limit 3 30

# normal exit codes, it just respawns.
normal exit 0 TERM

chdir "<%= @release_path %>"

<% @env.each do |k,v| %>
env <%= k %>=<%= (v || '').to_s.gsub('"', '\\"') %>
<% end %>

script
  exec bundle exec clockwork config/clockwork.rb
end script
